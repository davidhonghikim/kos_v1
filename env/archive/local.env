# =============================================================================
# kOS v1 Local Services Configuration - Service-First Organization
# =============================================================================
# All settings for each service are grouped together
# Core services at top, optional services below
# =============================================================================

# =============================================================================
# UNIFIED ADMIN CREDENTIALS (EDIT THESE ONCE FOR ALL SERVICES)
# =============================================================================
KOS_ADMIN_USER=kos-admin
KOS_ADMIN_PASSWORD=kos-30437
KOS_ADMIN_EMAIL=admin@kos.local

# =============================================================================
# CORE SERVICES (Always Enabled)
# =============================================================================

# --- API Service ---
KOS_API_ENABLE=true
KOS_API_HOST=api
KOS_API_PORT=${KOS_API_INTERNAL_PORT}
KOS_API_JWT_SECRET=
KOS_API_JWT_ALGORITHM=HS256
KOS_API_JWT_EXPIRATION=3600
KOS_API_JWT_REFRESH_EXPIRATION=86400
KOS_API_BCRYPT_ROUNDS=12
KOS_API_IMAGE=kos-v1-kos-app
KOS_API_CONTAINER_NAME=kos-app

# --- Frontend Service ---
KOS_FRONTEND_ENABLE=false
KOS_FRONTEND_HOST=frontend
KOS_FRONTEND_PORT=${KOS_FRONTEND_INTERNAL_PORT}
KOS_FRONTEND_API_URL=http://api:${KOS_API_INTERNAL_PORT}

# --- PostgreSQL Database ---
KOS_POSTGRES_ENABLE=true
KOS_POSTGRES_HOST=postgres
KOS_POSTGRES_PORT=${KOS_POSTGRES_INTERNAL_PORT}
KOS_POSTGRES_DB=kos_db
KOS_POSTGRES_USER=${KOS_ADMIN_USER}
KOS_POSTGRES_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_POSTGRES_INITDB_ARGS=--auth-host=scram-sha-256
KOS_POSTGRES_DISCOVERY_TYPE=single-node
KOS_POSTGRES_XPACK_SECURITY_ENABLED=false
KOS_POSTGRES_JAVA_OPTS=-Xms256m -Xmx512m
KOS_POSTGRES_IMAGE=postgres:15-alpine
KOS_POSTGRES_PROFILE=core

# --- Redis Cache ---
KOS_REDIS_ENABLE=true
KOS_REDIS_HOST=redis
KOS_REDIS_PORT=${KOS_REDIS_INTERNAL_PORT}
KOS_REDIS_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_REDIS_DB=0
KOS_REDIS_COMMAND=redis-server --appendonly yes
KOS_REDIS_IMAGE=redis:7-alpine
KOS_REDIS_PROFILE=core

# --- Database Management UIs ---
KOS_PGADMIN_ENABLE=true
KOS_PGADMIN_HOST=pgadmin
KOS_PGADMIN_PORT=${KOS_PGADMIN_INTERNAL_PORT}
KOS_PGADMIN_EMAIL=${KOS_ADMIN_EMAIL}
KOS_PGADMIN_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_PGADMIN_CONFIG_SERVER_MODE=False
KOS_PGADMIN_CONFIG_MASTER_PASSWORD_REQUIRED=False
KOS_PGADMIN_IMAGE=dpage/pgadmin4:8.4
KOS_PGADMIN_PROFILE=core

KOS_REDIS_COMMANDER_ENABLE=true
KOS_REDIS_COMMANDER_HOST=redis_commander
KOS_REDIS_COMMANDER_PORT=${KOS_REDIS_COMMANDER_INTERNAL_PORT}
KOS_REDIS_COMMANDER_USER=${KOS_ADMIN_USER}
KOS_REDIS_COMMANDER_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_REDIS_COMMANDER_REDIS_HOSTS=local:redis:${KOS_REDIS_INTERNAL_PORT}:0:${KOS_REDIS_PASSWORD}
KOS_REDIS_COMMANDER_IMAGE=rediscommander/redis-commander:latest
KOS_REDIS_COMMANDER_PROFILE=core

KOS_MONGO_EXPRESS_ENABLE=true
KOS_MONGO_EXPRESS_HOST=mongo_express
KOS_MONGO_EXPRESS_PORT=${KOS_MONGO_EXPRESS_INTERNAL_PORT}
KOS_MONGO_EXPRESS_USER=${KOS_ADMIN_USER}
KOS_MONGO_EXPRESS_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_MONGO_HOST=mongo
KOS_MONGO_PORT=27017
KOS_MONGO_ADMIN_USER=
KOS_MONGO_ADMIN_PASSWORD=
KOS_MONGO_EXPRESS_IMAGE=mongo-express:latest
KOS_MONGO_EXPRESS_PROFILE=core

# --- Neo4j Graph Database ---
KOS_NEO4J_ENABLE=true
KOS_NEO4J_HOST=neo4j
KOS_NEO4J_PORT=${KOS_NEO4J_INTERNAL_PORT}
KOS_NEO4J_HTTP_PORT=${KOS_NEO4J_HTTP_INTERNAL_PORT}
KOS_NEO4J_USER=${KOS_ADMIN_USER}
KOS_NEO4J_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_NEO4J_PLUGINS=apoc,graph-data-science
KOS_NEO4J_PROCEDURES_UNRESTRICTED=gds.*,apoc.*
KOS_NEO4J_HEAP_INITIAL_SIZE=512m
KOS_NEO4J_HEAP_MAX_SIZE=1G
KOS_NEO4J_PAGECACHE_SIZE=512m
KOS_NEO4J_IMAGE=neo4j:5.15
KOS_NEO4J_PROFILE=core

# --- Nginx Reverse Proxy ---
KOS_NGINX_ENABLE=true
KOS_NGINX_HOST=nginx
KOS_NGINX_PORT=${KOS_NGINX_INTERNAL_PORT}
KOS_NGINX_SSL_PORT=${KOS_NGINX_SSL_PORT:-443}
KOS_NGINX_IMAGE=nginx:alpine
KOS_NGINX_PROFILE=core

# =============================================================================
# AI/ML SERVICES
# =============================================================================

# --- Ollama Local LLMs ---
KOS_OLLAMA_ENABLE=true
KOS_OLLAMA_HOST=ollama
KOS_OLLAMA_PORT=${KOS_OLLAMA_INTERNAL_PORT}
KOS_OLLAMA_ORIGINS=*
KOS_OLLAMA_MODELS=/root/.ollama/models
KOS_OLLAMA_DEFAULT_MODELS=gemma3:2b,llama3.2:3b
KOS_OLLAMA_BASE_URL=http://ollama:${KOS_OLLAMA_INTERNAL_PORT}
KOS_OLLAMA_IMAGE=ollama/ollama:0.1.29
KOS_OLLAMA_PROFILE=core

# --- OpenWebUI LLM Interface ---
KOS_OPENWEBUI_ENABLE=true
KOS_OPENWEBUI_HOST=openwebui
KOS_OPENWEBUI_PORT=${KOS_OPENWEBUI_INTERNAL_PORT}
KOS_OPENWEBUI_SECRET_KEY=
KOS_OPENWEBUI_DEFAULT_MODELS=gemma3:2b,llama3.2:3b
KOS_OPENWEBUI_ADMIN_USER=${KOS_ADMIN_USER}
KOS_OPENWEBUI_ADMIN_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_OPENWEBUI_DEFAULT_USER_ROLE=admin
KOS_OPENWEBUI_ENABLE_SIGNUP=true
KOS_OPENWEBUI_ENABLE_LOGIN_FORM=true
KOS_OPENWEBUI_BASE_URL=http://openwebui:${KOS_OPENWEBUI_INTERNAL_PORT}
KOS_OPENWEBUI_IMAGE=ghcr.io/open-webui/open-webui:v0.1.1156
KOS_OPENWEBUI_PROFILE=core

# --- HuggingFace Transformers ---
KOS_HUGGINGFACE_ENABLE=true
KOS_HUGGINGFACE_HOST=huggingface
KOS_HUGGINGFACE_PORT=${KOS_HUGGINGFACE_INTERNAL_PORT}
KOS_HUGGINGFACE_TRANSFORMERS_CACHE=/app/cache
KOS_HUGGINGFACE_HOME=/app/huggingface
KOS_HUGGINGFACE_HUB_OFFLINE=false
KOS_HUGGINGFACE_IMAGE=huggingface/transformers-pytorch-gpu:latest
KOS_HUGGINGFACE_PROFILE=ai

# --- Automatic1111 Stable Diffusion ---
KOS_AUTOMATIC1111_ENABLE=true
KOS_AUTOMATIC1111_HOST=automatic1111
KOS_AUTOMATIC1111_PORT=${KOS_AUTOMATIC1111_EXTERNAL_PORT}
KOS_AUTOMATIC1111_COMMANDLINE_ARGS=--listen --port ${KOS_AUTOMATIC1111_EXTERNAL_PORT} --enable-insecure-extension-access
KOS_AUTOMATIC1111_REQS_FILE=requirements.txt
KOS_AUTOMATIC1111_IMAGE=mikeboensel/automatic1111:latest
KOS_AUTOMATIC1111_PROFILE=core

# --- ComfyUI Node-Based Workflow ---
KOS_COMFYUI_ENABLE=true
KOS_COMFYUI_HOST=comfyui
KOS_COMFYUI_PORT=${KOS_COMFYUI_EXTERNAL_PORT}
KOS_COMFYUI_IMAGE=zhangp365/comfyui:latest
KOS_COMFYUI_PROFILE=core

# =============================================================================
# STORAGE SERVICES
# =============================================================================

# --- Weaviate Vector Database ---
KOS_WEAVIATE_ENABLE=true
KOS_WEAVIATE_HOST=weaviate
KOS_WEAVIATE_PORT=${KOS_WEAVIATE_INTERNAL_PORT}
KOS_WEAVIATE_QUERY_DEFAULTS_LIMIT=25
KOS_WEAVIATE_AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED=true
KOS_WEAVIATE_PERSISTENCE_DATA_PATH=/var/lib/weaviate
KOS_WEAVIATE_DEFAULT_VECTORIZER_MODULE=text2vec-transformers
KOS_WEAVIATE_ENABLE_MODULES=text2vec-transformers
KOS_WEAVIATE_CLUSTER_HOSTNAME=node1
KOS_WEAVIATE_IMAGE=semitechnologies/weaviate:1.22.4
KOS_WEAVIATE_PROFILE=core

# --- MinIO Object Storage ---
KOS_MINIO_ENABLE=true
KOS_MINIO_HOST=minio
KOS_MINIO_API_PORT=${KOS_MINIO_INTERNAL_PORT}
KOS_MINIO_CONSOLE_PORT=${KOS_MINIO_CONSOLE_INTERNAL_PORT}
KOS_MINIO_ROOT_USER=${KOS_ADMIN_USER}
KOS_MINIO_ROOT_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_MINIO_COMMAND=server /data --console-address ":${KOS_MINIO_CONSOLE_INTERNAL_PORT}"
KOS_MINIO_IMAGE=minio/minio:RELEASE.2023-11-15T20-43-25Z
KOS_MINIO_PROFILE=core

# --- Elasticsearch Search Engine ---
KOS_ELASTICSEARCH_ENABLE=true
KOS_ELASTICSEARCH_HOST=elasticsearch
KOS_ELASTICSEARCH_PORT=${KOS_ELASTICSEARCH_INTERNAL_PORT}
KOS_ELASTICSEARCH_CLUSTER_PORT=${KOS_ELASTICSEARCH_CLUSTER_INTERNAL_PORT}
KOS_ELASTICSEARCH_USERNAME=${KOS_ADMIN_USER}
KOS_ELASTICSEARCH_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_ELASTICSEARCH_IMAGE=docker.elastic.co/elasticsearch/elasticsearch:8.11.0
KOS_ELASTICSEARCH_PROFILE=core

# =============================================================================
# DEVELOPMENT SERVICES
# =============================================================================

# --- Gitea Git Hosting ---
KOS_GITEA_ENABLE=true
KOS_GITEA_HOST=gitea
KOS_GITEA_PORT=${KOS_GITEA_INTERNAL_PORT}
KOS_GITEA_SSH_PORT=${KOS_GITEA_SSH_INTERNAL_PORT}
KOS_GITEA_USER_UID=1000
KOS_GITEA_USER_GID=1000
KOS_GITEA_DB_TYPE=sqlite3
KOS_GITEA_DB_PATH=/data/gitea/gitea.db
KOS_GITEA_DOMAIN=gitea
KOS_GITEA_ROOT_URL=http://gitea:${KOS_GITEA_EXTERNAL_PORT}/
KOS_GITEA_SSH_DOMAIN=gitea
KOS_GITEA_HTTP_PORT=${KOS_GITEA_INTERNAL_PORT}
KOS_GITEA_DISABLE_SSH=false
KOS_GITEA_INSTALL_LOCK=true
KOS_GITEA_DISABLE_REGISTRATION=false
KOS_GITEA_REQUIRE_SIGNIN_VIEW=false
KOS_GITEA_LOG_LEVEL=Info
KOS_GITEA_LOG_MODE=console
KOS_GITEA_ADMIN_USER=${KOS_ADMIN_USER}
KOS_GITEA_ADMIN_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_GITEA_ADMIN_EMAIL=${KOS_ADMIN_EMAIL}
KOS_GITEA_IMAGE=gitea/gitea:1.21.0
KOS_GITEA_PROFILE=core

# --- Supabase Local ---
KOS_SUPABASE_ENABLE=true
KOS_SUPABASE_HOST=supabase
KOS_SUPABASE_PORT=${KOS_SUPABASE_INTERNAL_PORT}
KOS_SUPABASE_STUDIO_PORT=${KOS_SUPABASE_STUDIO_INTERNAL_PORT}
KOS_SUPABASE_ADMIN_USER=${KOS_ADMIN_USER}
KOS_SUPABASE_ADMIN_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_SUPABASE_IMAGE=supabase/postgres:15.1.0.117
KOS_SUPABASE_PROFILE=core

# --- Browseruse (AI Web Browser) ---
KOS_BROWSERUSE_ENABLE=true
KOS_BROWSERUSE_HOST=browseruse
KOS_BROWSERUSE_PORT=${KOS_BROWSERUSE_INTERNAL_PORT}
KOS_BROWSERUSE_IMAGE=browseruse/browseruse:latest
KOS_BROWSERUSE_PROFILE=core

# --- Langfuse Context Management ---
KOS_LANGFUSE_ENABLE=true
KOS_LANGFUSE_HOST=langfuse
KOS_LANGFUSE_PORT=${KOS_LANGFUSE_INTERNAL_PORT}
KOS_LANGFUSE_IMAGE=langfuse/langfuse:2
KOS_LANGFUSE_PROFILE=core

# --- Code-Server (VS Code in Browser, Telemetry Disabled) ---
KOS_CODE_SERVER_ENABLE=true
KOS_CODE_SERVER_HOST=code-server
KOS_CODE_SERVER_PORT=${KOS_CODE_SERVER_INTERNAL_PORT}
KOS_CODE_SERVER_DISABLE_TELEMETRY=true
KOS_CODE_SERVER_EXTRA_ARGS=--disable-telemetry
KOS_CODE_SERVER_IMAGE=codercom/code-server:latest
KOS_CODE_SERVER_PROFILE=core

# --- VSCodium (Desktop, Telemetry-Free by Default) ---
KOS_VSCODIUM_ENABLE=true
KOS_VSCODIUM_HOST=vscodium
KOS_VSCODIUM_PORT=${KOS_VSCODIUM_INTERNAL_PORT}
KOS_VSCODIUM_IMAGE=lscr.io/linuxserver/vscodium:latest
KOS_VSCODIUM_PROFILE=core

# =============================================================================
# MONITORING SERVICES
# =============================================================================

# --- Prometheus Metrics Collection ---
KOS_PROMETHEUS_ENABLE=true
KOS_PROMETHEUS_HOST=prometheus
KOS_PROMETHEUS_PORT=${KOS_PROMETHEUS_INTERNAL_PORT}
KOS_PROMETHEUS_RETENTION_DAYS=15
KOS_PROMETHEUS_SCRAPE_INTERVAL=15s
KOS_PROMETHEUS_IMAGE=prom/prometheus:v2.48.0
KOS_PROMETHEUS_PROFILE=core

# --- Grafana Dashboard ---
KOS_GRAFANA_ENABLE=true
KOS_GRAFANA_HOST=grafana
KOS_GRAFANA_PORT=${KOS_GRAFANA_INTERNAL_PORT}
KOS_GRAFANA_ADMIN_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_GRAFANA_DATASOURCES=prometheus,elasticsearch,postgresql
KOS_GRAFANA_IMAGE=grafana/grafana:10.2.0
KOS_GRAFANA_PROFILE=core

# --- cAdvisor Container Monitoring ---
KOS_CADVISOR_ENABLE=true
KOS_CADVISOR_HOST=cadvisor
KOS_CADVISOR_PORT=${KOS_CADVISOR_INTERNAL_PORT}
KOS_CADVISOR_IMAGE=gcr.io/cadvisor/cadvisor:v0.47.2
KOS_CADVISOR_PROFILE=monitoring

# =============================================================================
# WORKFLOW SERVICES
# =============================================================================

# --- N8N Workflow Automation ---
KOS_N8N_ENABLE=true
KOS_N8N_HOST=n8n
KOS_N8N_PORT=${KOS_N8N_INTERNAL_PORT}
KOS_N8N_PROTOCOL=http
KOS_N8N_USER_MANAGEMENT_DISABLED=false
KOS_N8N_BASIC_AUTH_ACTIVE=false
KOS_N8N_BASIC_AUTH_USER=${KOS_ADMIN_USER}
KOS_N8N_BASIC_AUTH_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_N8N_WEBHOOK_URL=http://n8n:${KOS_N8N_INTERNAL_PORT}/
KOS_N8N_TIMEZONE=UTC
KOS_N8N_ENCRYPTION_KEY=
KOS_N8N_IMAGE=n8nio/n8n:1.28.0
KOS_N8N_PROFILE=core

# --- Penpot Design Tool ---
KOS_PENPOT_ENABLE=true
KOS_PENPOT_HOST=penpot
KOS_PENPOT_PORT=${KOS_PENPOT_INTERNAL_PORT}
KOS_PENPOT_DATABASE_URI=postgresql://penpot:penpot@postgres:5432/penpot
KOS_PENPOT_REDIS_URI=redis://redis:6379/0
KOS_PENPOT_SECRET_KEY=
KOS_PENPOT_PUBLIC_URI=http://penpot:${KOS_PENPOT_INTERNAL_PORT}
KOS_PENPOT_IMAGE=penpotapp/frontend:latest
KOS_PENPOT_PROFILE=core

# =============================================================================
# SELF-HOSTED SERVICES
# =============================================================================

# --- Nextcloud File Storage ---
KOS_NEXTCLOUD_ENABLE=true
KOS_NEXTCLOUD_HOST=nextcloud
KOS_NEXTCLOUD_PORT=${KOS_NEXTCLOUD_INTERNAL_PORT}
KOS_NEXTCLOUD_ADMIN_USER=${KOS_ADMIN_USER}
KOS_NEXTCLOUD_ADMIN_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_NEXTCLOUD_DB_PASSWORD=${KOS_ADMIN_PASSWORD}
KOS_NEXTCLOUD_IMAGE=nextcloud:25.0.0
KOS_NEXTCLOUD_PROFILE=selfhosted

# --- Admin Panel (TODO: Migrate from other repos) ---
KOS_ADMIN_PANEL_ENABLE=false
KOS_ADMIN_PANEL_HOST=admin_panel
KOS_ADMIN_PANEL_PORT=${KOS_ADMIN_PANEL_INTERNAL_PORT}
KOS_ADMIN_PANEL_IMAGE=admin_panel:latest
KOS_ADMIN_PANEL_PROFILE=selfhosted

# --- Docker Registry (TODO: Migrate from other repos) ---
KOS_REGISTRY_ENABLE=false
KOS_REGISTRY_HOST=registry
KOS_REGISTRY_PORT=${KOS_REGISTRY_INTERNAL_PORT}
KOS_REGISTRY_IMAGE=registry:2.8.2
KOS_REGISTRY_PROFILE=selfhosted

# =============================================================================
# MANAGER SERVICES
# =============================================================================

# --- Prompt Manager (TODO: Migrate from other repos) ---
KOS_PROMPT_MANAGER_ENABLE=false
KOS_PROMPT_MANAGER_HOST=prompt_manager
KOS_PROMPT_MANAGER_PORT=${KOS_PROMPT_MANAGER_INTERNAL_PORT}
KOS_PROMPT_MANAGER_IMAGE=prompt_manager:latest
KOS_PROMPT_MANAGER_PROFILE=core

# --- Artifact Manager (TODO: Migrate from other repos) ---
KOS_ARTIFACT_MANAGER_ENABLE=false
KOS_ARTIFACT_MANAGER_HOST=artifact_manager
KOS_ARTIFACT_MANAGER_PORT=${KOS_ARTIFACT_MANAGER_INTERNAL_PORT}
KOS_ARTIFACT_MANAGER_IMAGE=artifact_manager:latest
KOS_ARTIFACT_MANAGER_PROFILE=core

# =============================================================================
# SECURITY SERVICES
# =============================================================================

# --- HashiCorp Vault (TODO: Migrate from kai-cd/chatdemon) ---
KOS_VAULT_ENABLE=true
KOS_VAULT_HOST=vault
KOS_VAULT_PORT=${KOS_VAULT_INTERNAL_PORT}
KOS_VAULT_DEV_ROOT_TOKEN_ID=${KOS_ADMIN_PASSWORD}
KOS_VAULT_DEV_LISTEN_ADDRESS=0.0.0.0:${KOS_VAULT_INTERNAL_PORT}
KOS_VAULT_DEV_DISABLE_MLOCK=true
KOS_VAULT_IMAGE=hashicorp/vault:1.15.0
KOS_VAULT_PROFILE=security 